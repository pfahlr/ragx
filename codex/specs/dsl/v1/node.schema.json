{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/ragx/dsl/v1/node.schema.json",
  "title": "RAGX DSL v1 Node",
  "type": "object",
  "oneOf": [
    {
      "title": "unit node",
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "kind": {
          "const": "unit"
        },
        "tool": {
          "type": "string",
          "minLength": 1
        },
        "params": {
          "type": "object",
          "additionalProperties": true
        },
        "next": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": [
        "id",
        "kind",
        "tool",
        "next"
      ],
      "additionalProperties": false
    },
    {
      "title": "transform node",
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "kind": {
          "const": "transform"
        },
        "op": {
          "type": "string",
          "minLength": 1
        },
        "next": {
          "type": "string",
          "minLength": 1
        }
      },
      "required": [
        "id",
        "kind",
        "op",
        "next"
      ],
      "additionalProperties": false
    },
    {
      "title": "end node",
      "properties": {
        "id": {
          "type": "string",
          "minLength": 1
        },
        "kind": {
          "const": "end"
        }
      },
      "required": [
        "id",
        "kind"
      ],
      "additionalProperties": false
    }
  ]
}